# Business Management System API

Современная система управления бизнес-процессами с поддержкой команд, задач, встреч и оценок эффективности.

## 🚀 Основной функционал

### Управление пользователями и ролями
- **Регистрация и аутентификация**
- **Три уровня доступа**:
  - `USER` - базовые права (работа с задачами своей команды)
  - `MANAGER` - управление командой и оценка работы
  - `ADMIN` - полный доступ ко всей системе

### Командная работа
- Создание команд с уникальными пригласительными кодами
- Присоединение к командам и управление участниками
- Изоляция данных между командами

### Управление задачами
- Создание задач с дедлайнами и статусами (OPEN, IN_PROGRESS, COMPLETED)
- Назначение исполнителей из команды
- Комментирование задач
- Оценка выполненных задач (1-5 звезд)
- Расчет средней оценки за период

### Планирование встреч
- Создание встреч с участниками
- Автоматическая проверка конфликтов по времени
- Фильтрация встреч по датам

### Календарь событий
- Единое представление задач и встреч
- Фильтрация по дню, месяцу или произвольному диапазону
- Быстрый доступ к событиям дня/месяца

## 📋 Требования

⚡ FastAPI — современный фреймворк для создания API на Python.

🧠 Pydantic — валидация данных и управление конфигурацией.

🔐 FastAPI Users — аутентификация и управление пользователями.

🛠️ SQLAlchemy — ORM для работы с базой данных.

🐘 PostgreSQL — реляционная база данных.

🔄 Alembic — управление миграциями базы данных.

🐋 Docker Compose — запуск и оркестрация контейнеров для разработки и продакшена.

🛠️ sqladmin — веб-панель для удобного управления моделями базы данных.

## 🛠 Установка и запуск

### Вариант 1: Docker (рекомендуется)

```bash
# Клонирование репозитория
git clone git@github.com:ESergievich/business-management-system.git
cd business-management-system

# Создание .env файла
cp .env.template .env

# Запуск с Docker Compose
docker-compose up -d

# Применение миграций (выполняется автоматически при старте)
# API доступен на http://localhost:8000
# Adminer (DB UI) на http://localhost:8080
```


## 🏗 Структура проекта

```
business-management-system/
├── app/
│   ├── admin
│   │   └── admin.py
│   ├── api/
│   │   └── api_v1/              # API endpoints v1
│   │       ├── auth.py          # Аутентификация
│   │       ├── users.py         # Управление пользователями
│   │       ├── teams.py         # Команды
│   │       ├── tasks.py         # Задачи
│   │       ├── comments.py      # Комментарии
│   │       ├── evaluations.py   # Оценки
│   │       ├── meetings.py      # Встречи
│   │       └── calendar.py      # Календарь
│   ├── authentication/          # Настройка FastAPI Users
│   │   ├── backend.py
│   │   ├── strategy.py
│   │   └── user_manager.py
│   ├── core/
│   │   ├── config.py           # Конфигурация приложения
│   │   ├── db_helper.py        # Помощник БД
│   │   └── permissions.py      # Логика прав доступа
│   ├── dependencies/
│   │   └── role_dependencies.py # Зависимости для проверки ролей
│   ├── errors/
│   │   ├── exceptions.py       # Кастомные исключения
│   │   └── schemas.py          # Схемы ошибок
│   ├── models/                 # SQLAlchemy модели
│   │   ├── user.py
│   │   ├── team.py
│   │   ├── task.py
│   │   ├── comment.py
│   │   ├── evaluation.py
│   │   ├── meeting.py
│   │   └── association.py      # Many-to-many таблицы
│   ├── schemas/                # Pydantic схемы
│   │   ├── user.py
│   │   ├── team.py
│   │   ├── task.py
│   │   ├── comment.py
│   │   ├── evaluation.py
│   │   ├── meeting.py
│   │   └── calendar.py
│   ├── service/                # Бизнес-логика
│   │   ├── calendar_service.py
│   │   └── meeting_service.py
│   └── main.py                 # Точка входа приложения
├── migrations/                 # Alembic миграции
├── tests/                      # Тесты
│   ├── configuration/          # Функциональные тесты
│   └── permissions/            # Тесты прав доступа
├── docker-compose.yml
├── Dockerfile
├── pyproject.toml             # Конфигурация проекта
├── alembic.ini                # Конфигурация миграций
└── README.md
```

## 🔐 Модель безопасности

### Роли и права доступа

| Действие | USER | MANAGER | ADMIN |
|----------|------|---------|-------|
| Просмотр задач своей команды | ✅ | ✅ | ✅ |
| Просмотр всех задач | ❌ | ❌ | ✅ |
| Создание задач | ❌ | ✅ (своя команда) | ✅ |
| Обновление задач | ✅ (назначенные) | ✅ (своя команда) | ✅ |
| Удаление задач | ❌ | ✅ (своя команда) | ✅ |
| Оценка задач | ❌ | ✅ (своя команда) | ✅ |
| Создание команд | ❌ | ❌ | ✅ |
| Управление участниками | ❌ | ✅ (своя команда) | ✅ |
| Создание встреч | ✅ | ✅ | ✅ |
| Отмена встреч | ✅ (организатор) | ✅ (организатор) | ✅ (организатор) |
